# Исправления v2.3.1 - Переводы категорий и прокрутка на iOS

## Проблемы, которые были исправлены

### 1. ✅ Русские названия категорий в интерфейсе на иврите

**Проблема:**
При выборе языка иврит в списке категорий отображались русские названия (например, "жидкости\масла", "типуль", "тормоза").

**Причина:**
У некоторых категорий (ID: 10-13) отсутствовали переводы на иврит и английский (поля `name_he` и `name_en` были `None`).

**Решение:**
1. Создан скрипт `update_category_translations.py` для автоматического обновления переводов
2. Добавлены переводы для всех категорий:
   - тормоза → בלמים
   - типуль → טיפול
   - жидкости\масла → נוזלים\שמנים
   - типуль\кузов → טיפול\מרכב

**Список обновленных категорий:**
```
ID 10: тормоза        → HE: בלמים
ID 11: типуль         → HE: טיפול
ID 12: жидкости\масла → HE: נוזלים\שמנים
ID 13: типуль\кузов   → HE: טיפול\מרכב
```

### 2. ✅ Список категорий не прокручивается на iPhone

**Проблема:**
На iPhone при нажатии на поле выбора категории открывается длинный список, который невозможно прокрутить - пользователь не может увидеть все категории.

**Причина:**
Недостаточные CSS-стили для поддержки прокрутки в нативном select на iOS устройствах.

**Решение:**
Обновлен файл `static/css/mobile-responsive.css`:

```css
/* Исправление прокрутки для select на мобильных */
.form-group select {
    -webkit-appearance: menulist-button;
    appearance: menulist-button;
    max-height: 300px !important; /* Ограничиваем высоту для прокрутки */
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

/* Специально для iOS - улучшаем прокрутку select */
@supports (-webkit-touch-callout: none) {
    .form-group select {
        -webkit-overflow-scrolling: touch !important;
        overflow-y: scroll !important;
    }
}

.form-group select option {
    font-size: 16px;
    padding: 10px;
    min-height: 44px; /* Минимальная высота для удобного тапа */
}
```

**Улучшения:**
- Добавлено `max-height: 300px` для ограничения высоты списка
- Добавлена поддержка iOS через `@supports (-webkit-touch-callout: none)`
- Увеличена минимальная высота опций до 44px для удобства тапа
- Включена плавная прокрутка `-webkit-overflow-scrolling: touch`

## Файлы, которые были изменены

### Backend:
- ✅ `update_category_translations.py` - новый скрипт для обновления переводов

### Frontend:
- ✅ `static/css/mobile-responsive.css` - улучшена прокрутка select на iOS

### База данных:
- ✅ Обновлены переводы для 7 категорий

## Как протестировать

### Тест 1: Переводы категорий на иврит

1. Откройте форму создания заказа: http://127.0.0.1:8000/mechanic/orders/new
2. Переключите язык на иврит (עברית)
3. Нажмите на поле "קטגוריית חלפים" (Категория запчастей)
4. **Проверьте:** Все категории должны быть на иврите:
   - ✅ בלמים (Тормоза)
   - ✅ מנוע (Двигатель)
   - ✅ טיפול (Типуль)
   - ✅ נוזלים\שמנים (Жидкости\Масла)
   - НЕ ДОЛЖНО быть русских названий!

### Тест 2: Прокрутка на iPhone

1. Откройте сайт на iPhone/iPad
2. Перейдите к форме создания заказа
3. Нажмите на поле выбора категории
4. **Проверьте:**
   - ✅ Список открывается корректно
   - ✅ Можно прокрутить список вверх/вниз
   - ✅ Видны все категории
   - ✅ Элементы списка достаточно большие для тапа

## Для деплоя на Render

После git push изменений на GitHub, выполните на Render:

```bash
# Обновить переводы категорий
python update_category_translations.py
```

Или через веб-интерфейс Render:
1. Зайдите в Shell вашего сервиса
2. Выполните: `python update_category_translations.py`

## Миграция для существующих инсталляций

Если у вас уже развернуто приложение, выполните:

```bash
# Локально
python update_category_translations.py

# На Render (через Shell)
python update_category_translations.py
```

Скрипт автоматически:
- Найдет категории без переводов
- Добавит переводы на английский и иврит
- Сохранит изменения в базе данных
- Не затронет категории с уже существующими переводами

## Changelog

**v2.3.1** (5 ноября 2025)
- ✅ Исправлено: Добавлены переводы на иврит для всех категорий
- ✅ Исправлено: Улучшена прокрутка списка категорий на iOS
- ✅ Добавлено: Скрипт автоматического обновления переводов
- ✅ Улучшено: CSS для мобильных устройств (select)

## Проверка

```python
# Проверить переводы в базе данных
from app import app, db
from models import Category

with app.app_context():
    categories = Category.query.all()
    for cat in categories:
        if not cat.name_he:
            print(f"⚠️  Категория без перевода: {cat.name}")
        else:
            print(f"✅ {cat.name} → {cat.name_he}")
```

Все категории должны иметь переводы!

---

**Статус:** ✅ Исправлено  
**Версия:** v2.3.1  
**Дата:** 5 ноября 2025
